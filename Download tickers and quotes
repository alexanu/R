BORSE <- c("NYSE","NASDAQ","AMEX")
urls <- c("http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nyse&render=download",
          "http://www.nasdaq.com/screening/companies-by-industry.aspx?exchange=NASDAQ&render=download",
          "http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=amex&render=download")
BORSE_URL <- data.frame(BORSE, urls, stringsAsFactors=F)
BORSE_URL$urls


library(data.table)
datalist<-NULL # clear datalist (just in case)
datalist = lapply(BORSE_URL$urls, #creates list: reads all  the txt file from the folder and every dataframe in separate list componentassuming tab separated values with a header   
                  FUN=fread, # fread from the package "DATA.TABLE" does it much faster than read.table (standard functionality). The comparison of time could be done using function system.time(x), where x is our expression
                  header=TRUE)
datalist <- mapply(cbind, datalist , "Borse"=BORSE_URL$BORSE , SIMPLIFY=F) # add new column to every data.table in the list and fills it with the symbol
datatb = rbindlist(datalist, fill=TRUE) # merging rows
setnames(datatb, make.names(colnames(datatb))) # this remove spaces from column names
datatb
names(datalist[3])




temp = read.csv(url_NYSE, header=TRUE, stringsAsFactors=F)  
tickers = temp[, 'Symbol']
return(tickers)



all_tickers
url <- paste0("http://www.sectorspdr.com/sectorspdr/IDCO.Client.Spdrs.Holdings/Export/ExportCsv?symbol=",
              spdr) # paste0("a", "b") == paste("a", "b", sep="")
